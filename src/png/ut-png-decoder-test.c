#include <assert.h>
#include <stdio.h>

#include "ut.h"

int main(int argc, char **argv) {
  UtObjectRef black_dot_data = ut_uint8_list_new_with_data(
      67, 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00,
      0x0d, 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
      0x01, 0x08, 0x00, 0x00, 0x00, 0x00, 0x3a, 0x7e, 0x9b, 0x55, 0x00, 0x00,
      0x00, 0x0a, 0x49, 0x44, 0x41, 0x54, 0x08, 0xd7, 0x63, 0x60, 0x00, 0x00,
      0x00, 0x02, 0x00, 0x01, 0xe2, 0x21, 0xbc, 0x33, 0x00, 0x00, 0x00, 0x00,
      0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60, 0x82);
  UtObjectRef black_dot_data_stream = ut_list_input_stream_new(black_dot_data);
  UtObjectRef black_dot_decoder = ut_png_decoder_new(black_dot_data_stream);
  UtObjectRef black_dot_image = ut_png_decoder_decode_sync(black_dot_decoder);
  ut_assert_is_not_error(black_dot_image);
  assert(ut_png_image_get_width(black_dot_image) == 1);
  assert(ut_png_image_get_height(black_dot_image) == 1);
  assert(ut_png_image_get_bit_depth(black_dot_image) == 8);
  assert(ut_png_image_get_colour_type(black_dot_image) ==
         UT_PNG_COLOUR_TYPE_GREYSCALE);

  return 0;
}
